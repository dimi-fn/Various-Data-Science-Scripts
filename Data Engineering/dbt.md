# DBT

Contents
=======================
* [DBT Resources](#dbt-resources)
* [DBT Commands](#dbt-commands)
* [DBT - Miscellaneous](#dbt---miscellaneous)
     * [MQL](#mql)
     * [Materialization](#materialization)


-------------------------------------------------------------------------------


* DBT is the 'Transform' part of the ETL/ELT process, and it can connect direcly to your data platform to model data.


# DBT Resources
- Learn more about dbt [in the docs](https://docs.getdbt.com/docs/introduction)
- Check out [Discourse](https://discourse.getdbt.com/) for commonly asked questions and answers
- Join the [dbt community](http://community.getbdt.com/) to learn from other analytics engineers
- Find [dbt events](https://events.getdbt.com) near you
- Check out [the blog](https://blog.getdbt.com/) for the latest news on dbt's development and best practices

--------------------------------------

# DBT commands

| **Command**   | **Description**          |  **Notes** |
|------------|---------------|---------------|
| `dbt run`   | It will execute the project based on the target value specified in the profiles.yml file. |   |
| `dbt run --profiles-dir .`   | This tells dbt to look for the profiles.yml in the current directory. |   |
| `dbt run --profiles-dir . --target <dev/prod>`   | This tells dbt to look for the profiles.yml in the current directory and execute the specified target |   |
| `dbt run --profiles-dir . --target prod --models model_1.sql` | This command will only execute the model model_1.sql targeting the prod environment  |   |
| `dbt run --select models/analytics/*` | This will run only the models located in the models/analytics/ directory. |   |
| `dbt compile --profiles-dir .`  |  Compiles DBT project's SQL files without actually running the queries |   |
| `dbt debug`   | It checks the installation, verifies database connections, validates configurations in profiles.yml and dbt_project.yml, and ensures that all environment variables are properly set. It helps identify and resolve common setup issues in your DBT environment. |   |
| `dbt debug --profiles-dir .`   |  |   |
| `dbt test`   |  |   |
| `dbt test --store-failures`   |  This creates a **dbt_test__audit** schema in your database where you can inspect failed rows. |  In the **dbt_test__audit dataset**, if the table has no data to display, then the test has passed, else it has failed and it will display the associated failed records|
| `dbt ls --resource-type test`   | This shows all tests that dbt will execute. |   |
| `dbt test > test_results.log`   | This saves the tests' terminal output in a file 'test_result.log' |   |
| `dbt test --select model1.sql model2.sql`   | Run dbt test on specified model(s) |   |
| `dbt docs generate --profiles-dir . --target dev`   | Generates the dbt documentation stored at target/manifest.json |   |
| `dbt docs serve <--port 8080/8000>`   | Starts a local web server to host and view the documentation generated by dbt docs generate. |   |

--------------------------------------

# DBT - Miscellaneous

## MQL
* In dbt, `MQL` (**Metric Query Language**) is a feature that allows users to define and query metrics in a structured way.
* MQL is designed to work with dbt's semantic layer, enabling analysts and data teams to define key business metrics (e.g., revenue, customer count, churn rate) in one central place and query them consistently.

## Materialization
* In dbt, materialization refers to how dbt stores and updates your models (SQL queries) in your database. When you create a dbt model (a .sql file with a SELECT statement), dbt needs to decide whether to store it as a table, view, or another format. This process is called materialization.
* https://docs.getdbt.com/docs/build/materializations

